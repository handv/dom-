addLoadEvent(highlightPage);addLoadEvent(prepareSlideshow);addLoadEvent(prepareInternalnav);addLoadEvent(preparePlaceholder);addLoadEvent(prepareGallery);addLoadEvent(stripeTable);addLoadEvent(highlightRows);addLoadEvent(focusLabels);addLoadEvent(prepareForms);function addLoadEvent(a){var b=window.onload;if(typeof window.onload!="function"){window.onload=a}else{window.onload=function(){b();a()}}}function insertAfter(c,a){var b=a.parentElement;if(b.lastChild==a){b.appendChild(c)}else{b.insertBefore(c,a.nextSibling)}}function addClass(b,c){if(!b.className){b.className=c}else{var a=b.className;a+=" ";a+=c;b.className=a}}function highlightPage(){if(!document.getElementsByTagName){return false}if(!document.getElementsByTagName("nav")){return false}if(!document.getElementsByTagName("a")){return false}var a=document.getElementsByTagName("nav")[0].getElementsByTagName("a");for(var b=0;b<a.length;b++){linkUrl=a[b].href;if(window.location.href.indexOf(linkUrl)!=-1){addClass(a[b],"here");var c=a[b].lastChild.nodeValue.toLowerCase();document.body.setAttribute("id",c)}}}function moveElement(d,g,f,c){if(!document.getElementById){return false}if(!document.getElementById(d)){return false}var h=document.getElementById(d);if(h.movement){clearTimeout(h.movement)}var a=parseInt(!h.style.left?0:h.style.left);var i=parseInt(!h.style.top?0:h.style.top);var e=0;if(a==g&&i==f){return true}if(a<g){e=Math.ceil((g-a)/10);a+=e}if(a>g){e=Math.ceil(Math.abs((g-a))/10);a-=e}if(i<f){e=Math.ceil((f-i)/10);i+=e}if(i>f){e=Math.ceil((i-f)/10);i-=e}h.style.left=a+"px";h.style.top=i+"px";var b="moveElement('"+d+"', "+g+", "+f+", "+c+")";h.movement=setTimeout(b,c)}function prepareSlideshow(){if(!document.getElementById){return false}if(!document.getElementById("intro")){return false}var d=document.getElementById("intro");var c=document.createElement("div");c.setAttribute("id","slideshow");var f=document.createElement("img");f.setAttribute("src","images/frame.gif");f.setAttribute("id","frame");c.appendChild(f);var e=document.createElement("img");e.setAttribute("src","images/slideshow.gif");e.setAttribute("alt","a glimpse of what awaites you");e.setAttribute("id","preview");c.appendChild(e);insertAfter(c,d);var a=d.getElementsByTagName("a");for(var b=0;b<a.length;b++){a[b].thisI=b;a[b].onmouseover=function(){moveElement("preview",-150*(this.thisI+1),0,10)}}}function showSection(d){if(!document.getElementById){return false}if(!document.getElementsByTagName){return false}if(!document.getElementById("art")){return false}if(!document.getElementsByTagName("section")){return false}var b=document.getElementById("art");var c=b.getElementsByTagName("section");for(var a=0;a<c.length;a++){if(c[a].id==d){c[a].style.display="block"}else{c[a].style.display="none"}}}function prepareInternalnav(){if(!document.getElementById){return false}if(!document.getElementsByTagName){return false}if(!document.getElementById("art")){return false}if(!document.getElementsByTagName("section")){return false}var c=document.getElementById("art");var a=c.getElementsByTagName("a");for(var b=0;b<a.length;b++){a[b].onclick=function(){var d=this.href.split("#")[1];showSection(d)}}}function prepareGallery(){if(!document.getElementById){return false}if(!document.getElementsByTagName){return false}if(!document.getElementById("imagegallery")){return false}if(!document.getElementsByTagName("a")){return false}var a=document.getElementById("imagegallery");var b=a.getElementsByTagName("a");for(var c=0;c<b.length;c++){b[c].onclick=function(){showPic(this.title,this.href);return false}}}function preparePlaceholder(e,c){if(!document.getElementById){return false}if(!document.getElementById("imagegallery")){return false}var a=document.getElementById("imagegallery");var d=document.createElement("p");d.id="placeholder";d.innerHTML="Choose an image";var b=document.createElement("img");b.id="img";b.src="images/placeholder.gif";b.alt="my image gallery";insertAfter(b,a);insertAfter(d,a)}function showPic(d,b){if(!document.getElementById){return false}if(!document.getElementById("placeholder")){return false}if(!document.getElementById("img")){return false}var c=document.getElementById("placeholder");c.innerHTML=d;var a=document.getElementById("img");a.src=b;a.alt=b.split("/")[2].split(".jpg")[0]}function stripeTable(){if(!document.getElementsByTagName){return false}if(!document.getElementsByTagName("tbody")){return false}if(!document.getElementsByTagName("tr")){return false}var c=document.getElementsByTagName("tbody")[0];var a=document.getElementsByTagName("tr");for(var b=0;b<a.length;b++){if(b%2!=0){addClass(a[b],"odd")}}}function highlightRows(){if(!document.getElementsByTagName){return false}if(!document.getElementsByTagName("tbody")){return false}if(!document.getElementsByTagName("tr")){return false}var c=document.getElementsByTagName("tbody")[0];var a=document.getElementsByTagName("tr");for(var b=0;b<a.length;b++){a[b].oldClassName=a[b].className;a[b].onmouseover=function(){addClass(this,"highlight")};a[b].onmouseout=function(){this.className=this.oldClassName}}}function focusLabels(){if(!document.getElementsByTagName){return false}if(!document.getElementsByTagName("fieldset")){return false}if(!document.getElementsByTagName("label")){return false}var a=document.getElementsByTagName("fieldset")[0];var c=a.getElementsByTagName("label");for(var b=0;b<c.length;b++){c[b].onclick=function(){var e=this.getAttribute("for");var d=document.getElementById(e);if(!d){return false}d.focus()}}}function resetFields(c){if(Modernizr.input.placeholder){return}for(var b=0;b<c.elements.length;b++){var a=c.elements[b];a.txt=a.getAttribute("placeholder");a.onfocus=function(){if(this.placeholder==this.txt){this.placeholder=""}};a.onblur=function(){if(this.placeholder==""){this.placeholder=this.txt}};a.onblur()}}function prepareForms(){for(var a=0;a<document.forms.length;a++){var b=document.forms[a];resetFields(b);b.onsubmit=function(){if(!validateForm(this)){return false}var c=document.getElementsByTagName("article")[0];if(submitFormWithAjax(this,c)){return false}return true}}}function isFilled(a){if(a.value.replace(" ","").length==0){return false}var b=a.placeholder;return(a.value!=b)}function isEmail(a){return(a.value.indexOf("@")!=-1&&a.value.indexOf(".")!=-1)}function validateForm(c){for(var b=0;b<c.elements.length;b++){var a=c.elements[b];if(a.required){if(!isFilled(a)){alert("Please fill in the "+a.name+" field.");return false}if(a.type=="email"){if(!isEmail(a)){alert("The "+a.name+" field must be a valid email address");return false}}}}return true}function displayAjaxLoading(a){while(a.hasChildNodes()){a.removeChild(a.lastChild)}var b=document.createElement("img");b.src="images/loading.gif";b.alt="Loading...";a.appendChild(b)}function submitFormWithAjax(d,a){var c=new XMLHttpRequest();displayAjaxLoading(a);var g=[];for(var b=0;b<d.elements.length;b++){var f=d.elements[b];if(f.name){g.push(f.name+"="+encodeURIComponent(f.value))}}var e=g.join("&");c.open("POST",d.action,true);c.setRequestHeader("Content-type","application/x-www-form-urlencoded");c.onreadystatechange=function(){if(c.readyState==4){if(c.status==200){var h=c.reponseText.match(/<article>(.*)<\/article>/);if(h.length>0){a.innerHTML=h[1]}else{a.innerHTML="<p>Oops, there was an error. Sorry!</p>"}}else{a.innerHTML="<p>"+c.statusText+"</p>"}}};c.send(e);return true};
